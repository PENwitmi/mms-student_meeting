# 面談記録内容の再設計計画書

## 背景と問題点
現在の面談記録フォームは実際の教育現場のニーズと乖離している。

### 現在の問題点
1. **不要な制限**
   - 面談内容に50文字以上の最低文字数制限（不要）
   - 5000文字の上限制限（不要）

2. **不要な機能**
   - トピックタグ機能（不要）
   - フォローアップ事項（別の形式で管理）

3. **過度な必須項目**
   - すべての項目を必須にする必要なし
   - 必須は生徒選択と日付のみで十分

## 新しい面談記録の構造

### 必須項目（2項目のみ）
- **生徒選択**：誰との面談か
- **面談日**：いつ実施したか

### 記録内容（任意項目）
1. **直近1週間のGood Point**
   - 生徒の良かった点、成長した点
   - 自由記述形式（文字数制限なし）

2. **直近1週間のMore Point**  
   - 改善が必要な点、課題点
   - 自由記述形式（文字数制限なし）

3. **授業計画**
   - 今後の授業での指導方針
   - カリキュラムの調整内容
   - 自由記述形式（文字数制限なし）

4. **家庭学習計画**
   - 宿題の内容と量
   - 自主学習の指導
   - 自由記述形式（文字数制限なし）

5. **その他の話し合い内容**
   - 上記に該当しない重要事項
   - 保護者への連絡事項
   - 自由記述形式（文字数制限なし）

## データモデルの変更

### 現在のモデル（削除予定）
```typescript
interface InterviewRecord {
  topics: string[]      // 削除
  notes: string         // 変更
  followUp?: string     // 削除
}
```

### 新しいモデル
```typescript
interface InterviewRecord {
  id: string
  studentId: string           // 必須
  studentName: string         
  date: Date                  // 必須
  
  // 新しい記録項目（すべて任意）
  weeklyGoodPoints?: string   // 直近1週間のGood Point
  weeklyMorePoints?: string   // 直近1週間のMore Point  
  lessonPlan?: string        // 授業計画
  homeworkPlan?: string      // 家庭学習計画
  otherNotes?: string        // その他の話し合い内容
  
  // メタデータ
  createdBy: string
  createdAt: Date
  updatedAt: Date
}
```

## バリデーション変更

### 削除するバリデーション
- ❌ トピック最低1つ必須
- ❌ 面談内容50文字以上
- ❌ 面談内容5000文字以内
- ❌ フォローアップ1000文字以内

### 新しいバリデーション
- ✅ 生徒選択：必須
- ✅ 日付：必須、未来日付不可
- ✅ その他すべて：任意（空でもOK）

## UI/UXの変更

### フォームレイアウト
```
┌─────────────────────────────────────┐
│ 面談記録                              │
├─────────────────────────────────────┤
│ 生徒 *    [ドロップダウン]            │
│ 面談日 *  [日付選択]                  │
├─────────────────────────────────────┤
│ ■ 直近1週間の振り返り                 │
│                                      │
│ Good Point（良かった点）              │
│ [テキストエリア - 任意]               │
│                                      │
│ More Point（改善点）                  │
│ [テキストエリア - 任意]               │
├─────────────────────────────────────┤
│ ■ 今後の計画                         │
│                                      │
│ 授業計画                             │
│ [テキストエリア - 任意]               │
│                                      │
│ 家庭学習計画                          │
│ [テキストエリア - 任意]               │
├─────────────────────────────────────┤
│ ■ その他                             │
│                                      │
│ その他の話し合い内容                   │
│ [テキストエリア - 任意]               │
├─────────────────────────────────────┤
│               [キャンセル] [保存]      │
└─────────────────────────────────────┘
```

### カード表示の変更
- トピックタグを削除
- セクション別に内容を表示
- 空の項目は非表示

## 実装変更箇所

### 1. 型定義の更新
- `src/contexts/types/interview.ts`

### 2. フォームコンポーネントの修正
- `src/features/interviews/components/InterviewForm.tsx`
- TopicsInput.tsxを削除

### 3. 表示コンポーネントの修正
- `src/features/interviews/components/InterviewCard.tsx`
- `src/features/interviews/components/InterviewList.tsx`

### 4. バリデーションの更新
- `src/features/interviews/utils/validation.ts`

### 5. フックの更新
- `src/features/interviews/hooks/useInterviewForm.ts`

## 実装スケジュール

### Phase 1: データモデル更新（30分）
- [ ] 型定義の変更
- [ ] バリデーションルールの変更

### Phase 2: フォーム再実装（1時間）
- [ ] InterviewForm.tsxの修正
- [ ] 不要なコンポーネント削除
- [ ] 新しいフィールド追加

### Phase 3: 表示系の更新（30分）
- [ ] InterviewCardの修正
- [ ] 新しいレイアウト実装

### Phase 4: テストと調整（30分）
- [ ] 動作確認
- [ ] UIの微調整

**合計実装時間：約2.5時間**

## 移行計画

### 既存データの扱い
1. 既存の`notes`フィールドを`otherNotes`に移行
2. `topics`と`followUp`は削除（データロスあり）
3. 新規フィールドは空で初期化

### 互換性維持
- 既存データの読み取りは可能
- 新形式での保存時に自動変換

## 成功指標
- [ ] 必須項目が生徒と日付のみ
- [ ] 文字数制限なし
- [ ] 5つの記録項目が独立して入力可能
- [ ] 空の項目があっても保存可能
- [ ] UIが教育現場の実際の面談フローに沿っている