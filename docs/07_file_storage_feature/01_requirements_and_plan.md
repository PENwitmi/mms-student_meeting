# ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜æ©Ÿèƒ½ - è¦ä»¶å®šç¾©ã¨é–‹ç™ºè¨ˆç”»

## ðŸ“‹ æ¦‚è¦
MMS Student Meeting Systemã«ãƒ•ã‚¡ã‚¤ãƒ«ç®¡ç†æ©Ÿèƒ½ã‚’è¿½åŠ ã—ã€PDFã‚„ç”»åƒãªã©ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«ç´ã¥ã‘ã¦ä¿å­˜ãƒ»é–²è¦§ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚

## ðŸŽ¯ ç›®çš„
- ç”Ÿå¾’ã®æˆç¸¾è¡¨ã€ãƒ†ã‚¹ãƒˆçµæžœã€å­¦ç¿’è³‡æ–™ã‚’ã‚·ã‚¹ãƒ†ãƒ å†…ã§ç®¡ç†
- é¢è«‡æ™‚ã«å¿…è¦ãªè³‡æ–™ã¸ã®ã™ã°ã‚„ã„ã‚¢ã‚¯ã‚»ã‚¹
- å­¦ç¿’å±¥æ­´ã®ä¸€å…ƒç®¡ç†

## ðŸ“ æ©Ÿèƒ½è¦ä»¶

### 1. ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½
- **å¯¾å¿œãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼**: PDF, JPG, PNG, DOCX
- **ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºåˆ¶é™**: 10MB/ãƒ•ã‚¡ã‚¤ãƒ«
- **è¤‡æ•°ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠž**: å¯èƒ½ï¼ˆæœ€å¤§5ãƒ•ã‚¡ã‚¤ãƒ«åŒæ™‚ï¼‰
- **ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—**: å¯¾å¿œ

### 2. ãƒ•ã‚¡ã‚¤ãƒ«ç®¡ç†
- **ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ç®¡ç†**:
  - ãƒ•ã‚¡ã‚¤ãƒ«å
  - ãƒ•ã‚¡ã‚¤ãƒ«ã‚¿ã‚¤ãƒ—
  - ã‚µã‚¤ã‚º
  - ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ—¥æ™‚
  - ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰è€…
  - é–¢é€£ç”Ÿå¾’ID
  - ã‚«ãƒ†ã‚´ãƒªãƒ¼ï¼ˆæˆç¸¾è¡¨ã€ãƒ†ã‚¹ãƒˆã€å®¿é¡Œã€ãã®ä»–ï¼‰
  - èª¬æ˜Žï¼ˆä»»æ„ï¼‰

### 3. è¡¨ç¤ºæ©Ÿèƒ½
- **ãƒªã‚¹ãƒˆè¡¨ç¤º**:
  - ç®¡ç†è€…: å…¨ãƒ•ã‚¡ã‚¤ãƒ«é–²è¦§å¯èƒ½
  - ç”Ÿå¾’: è‡ªåˆ†ã«é–¢é€£ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿
  - ã‚½ãƒ¼ãƒˆæ©Ÿèƒ½ï¼ˆæ—¥ä»˜ã€åå‰ã€ã‚µã‚¤ã‚ºï¼‰
  - ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼æ©Ÿèƒ½ï¼ˆã‚«ãƒ†ã‚´ãƒªãƒ¼ã€æ—¥ä»˜ç¯„å›²ï¼‰

### 4. ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½
- **PDF**: ãƒ–ãƒ©ã‚¦ã‚¶å†…è¡¨ç¤ºï¼ˆreact-pdfä½¿ç”¨ï¼‰
- **ç”»åƒ**: ãƒ¢ãƒ¼ãƒ€ãƒ«ã§æ‹¡å¤§è¡¨ç¤º
- **ãã®ä»–**: ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã‚ªãƒ—ã‚·ãƒ§ãƒ³æä¾›

### 5. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¦ä»¶
- **ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡**:
  - èªè¨¼å¿…é ˆ
  - ãƒ­ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹ã‚¢ã‚¯ã‚»ã‚¹ï¼ˆç®¡ç†è€…/ç”Ÿå¾’ï¼‰
  - Firebase Storage ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«è¨­å®š
- **ãƒ•ã‚¡ã‚¤ãƒ«æ¤œè¨¼**:
  - ã‚¦ã‚¤ãƒ«ã‚¹ã‚¹ã‚­ãƒ£ãƒ³ï¼ˆæ¤œè¨Žï¼‰
  - ãƒ•ã‚¡ã‚¤ãƒ«ã‚¿ã‚¤ãƒ—æ¤œè¨¼
  - ã‚µã‚¤ã‚ºåˆ¶é™ãƒã‚§ãƒƒã‚¯

## ðŸ—ï¸ æŠ€è¡“è¨­è¨ˆ

### ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«
```typescript
interface FileRecord {
  id: string;
  fileName: string;
  fileType: string;
  fileSize: number;
  fileUrl: string;           // Firebase Storage URL
  category: FileCategory;
  description?: string;
  
  // Relations
  studentId: string;          // é–¢é€£ã™ã‚‹ç”Ÿå¾’
  uploadedBy: string;         // ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ID
  
  // Metadata
  createdAt: Date;
  updatedAt: Date;
}

type FileCategory = 
  | 'grade_report'    // æˆç¸¾è¡¨
  | 'test'           // ãƒ†ã‚¹ãƒˆ
  | 'homework'       // å®¿é¡Œ
  | 'other';         // ãã®ä»–
```

### ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 
```
src/
â”œâ”€â”€ contexts/
â”‚   â””â”€â”€ hooks/
â”‚       â””â”€â”€ realtime/
â”‚           â””â”€â”€ useFiles.ts        # ãƒ•ã‚¡ã‚¤ãƒ«æƒ…å ±ã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å–å¾—
â”œâ”€â”€ features/
â”‚   â””â”€â”€ files/
â”‚       â”œâ”€â”€ components/
â”‚       â”‚   â”œâ”€â”€ FileUploadModal.tsx
â”‚       â”‚   â”œâ”€â”€ FileList.tsx
â”‚       â”‚   â”œâ”€â”€ FilePreview.tsx
â”‚       â”‚   â””â”€â”€ FileListItem.tsx
â”‚       â”œâ”€â”€ hooks/
â”‚       â”‚   â””â”€â”€ useFileUpload.ts
â”‚       â””â”€â”€ types/
â”‚           â””â”€â”€ index.ts
â””â”€â”€ lib/
    â””â”€â”€ firebase/
        â””â”€â”€ storage.ts             # Firebase Storageè¨­å®š
```

### Firebaseè¨­å®š
1. **Firebase Storageæœ‰åŠ¹åŒ–**
2. **Firestore Collections**:
   - `files`: ãƒ•ã‚¡ã‚¤ãƒ«ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
3. **Storage Structure**:
   - `/students/{studentId}/files/{fileId}`

## ðŸ“… é–‹ç™ºè¨ˆç”»

### Phase 1: åŸºç›¤æ§‹ç¯‰ï¼ˆ2-3æ™‚é–“ï¼‰
- [ ] Firebase Storageè¨­å®š
- [ ] Firestore `files` ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ä½œæˆ
- [ ] ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«è¨­å®š
- [ ] DataContextã«ãƒ•ã‚¡ã‚¤ãƒ«é–¢é€£æ©Ÿèƒ½è¿½åŠ 

### Phase 2: ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½ï¼ˆ3-4æ™‚é–“ï¼‰
- [ ] FileUploadModal ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä½œæˆ
- [ ] ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãƒ•ãƒƒã‚¯å®Ÿè£…
- [ ] ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ä¿å­˜å‡¦ç†
- [ ] ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹è¡¨ç¤º

### Phase 3: è¡¨ç¤ºæ©Ÿèƒ½ï¼ˆ2-3æ™‚é–“ï¼‰
- [ ] FileList ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä½œæˆ
- [ ] useFiles ãƒ•ãƒƒã‚¯å®Ÿè£…
- [ ] ã‚½ãƒ¼ãƒˆãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼æ©Ÿèƒ½
- [ ] ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰çµ±åˆ

### Phase 4: ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½ï¼ˆ2-3æ™‚é–“ï¼‰
- [ ] react-pdfå°Žå…¥
- [ ] FilePreview ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä½œæˆ
- [ ] ãƒ¢ãƒ¼ãƒ€ãƒ«/ãƒ€ã‚¤ã‚¢ãƒ­ã‚°å®Ÿè£…
- [ ] ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½

### Phase 5: ãƒ†ã‚¹ãƒˆã¨æ”¹å–„ï¼ˆ1-2æ™‚é–“ï¼‰
- [ ] ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- [ ] ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹
- [ ] ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹æœ€é©åŒ–

## ðŸš€ å®Ÿè£…å„ªå…ˆé †ä½
1. **MVPå®Ÿè£…**:
   - PDFã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
   - ãƒªã‚¹ãƒˆè¡¨ç¤º
   - ç°¡æ˜“ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼ˆæ–°è¦ã‚¿ãƒ–ï¼‰
   
2. **æ‹¡å¼µæ©Ÿèƒ½**:
   - é«˜åº¦ãªãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
   - ã‚«ãƒ†ã‚´ãƒªãƒ¼åˆ†é¡ž
   - æ¤œç´¢æ©Ÿèƒ½

## âš ï¸ è€ƒæ…®äº‹é …
- **ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚³ã‚¹ãƒˆ**: Firebase Storageä½¿ç”¨é‡ã®ç›£è¦–
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹**: å¤§é‡ãƒ•ã‚¡ã‚¤ãƒ«æ™‚ã®ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³
- **GDPR/ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼**: å€‹äººæƒ…å ±ã‚’å«ã‚€ãƒ•ã‚¡ã‚¤ãƒ«ã®å–ã‚Šæ‰±ã„

## ðŸ“Š æˆåŠŸæŒ‡æ¨™
- ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æˆåŠŸçŽ‡ > 95%
- ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼è¡¨ç¤ºæ™‚é–“ < 2ç§’
- ãƒ¦ãƒ¼ã‚¶ãƒ¼æº€è¶³åº¦å‘ä¸Š

## ðŸ”— å‚è€ƒè³‡æ–™
- [Firebase Storage Documentation](https://firebase.google.com/docs/storage)
- [react-pdf Library](https://github.com/wojtekmaj/react-pdf)
- [Firebase Security Rules](https://firebase.google.com/docs/storage/security)